---
title: "RLSeq Report"
output: 
  html_document:
    code_folding: hide
    theme: flatly
    highlight: textmate
params:
  object: "placeholder"
---


```{r setup, include=FALSE, echo=FALSE}
object <- params$object

# Libraries
library(magrittr)
library(rlang)

# Enable
DT::datatable(matrix(), extensions="Buttons") 

# Wrangle results and trigger conditional templates
rlres <- object@metadata$results
rlreslst <- lapply(slotNames(rlres), function(sn) {
  tryCatch(rlresult(object, sn), error = function(e) {NULL})
})
names(rlreslst) <- slotNames(rlres)
isnull <- sapply(rlreslst, is.null)
rlreslst <- rlreslst[! isnull]
```

<br>

Sample name: <strong>`r object@metadata$sampleName`</strong>

Sample type: <strong>`r object@metadata$mode`</strong>

Genome: <strong>`r GenomeInfoDb::genome(object)`</strong>

Time: <strong>`r date()`</strong>

## Analysis results

```{r}
rmdlst <- lapply(
  names(rlreslst),
  function(res) {
    knitr::knit_child(
      system.file(
        "Rmd",
        paste0(res, ".Rmd"),
        package = "RLSeq"
      ), 
      envir = environment(), 
      quiet = TRUE
    )
  }
)
cat(unlist(rmdlst), sep = "\n")
```

***

&nbsp;
<hr />
<p style="text-align: center;">RLSeq Â© `r format(Sys.Date(), "%Y")``, <a href="https://gccri.bishop-lab.uthscsa.edu/"  target="_blank">Bishop Lab</a>, UT Health San Antonio</p>
<p style="text-align: center;">RLSeq maintainer: <span style="color: #808080;"><em>millerh1@uthscsa.edu</em></span></p>

&nbsp;
